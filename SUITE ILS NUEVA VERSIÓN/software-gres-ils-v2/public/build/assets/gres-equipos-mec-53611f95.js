window.exportGresEquiposPdf=function(o){console.log("Función exportGresEquiposPdf llamada con buqueId:",o);const r=["Preparando datos de equipos","Procesando diagramas de decisión","Organizando observaciones","Generando documento final"];let t=0,a;const l=document.createElement("div");l.innerHTML=`
        <div class="loading-container">
            <div id="loading-message"
                 style="opacity: 0;
                        transition: opacity 0.5s, transform 0.5s;
                        transform: translateX(-20px);
                        margin-top: 10px;">
            </div>
        </div>
    `;function s(){const e=document.getElementById("loading-message");e&&(e.style.opacity="0",e.style.transform="translateX(20px)",setTimeout(()=>{e.textContent=r[t],e.style.transform="translateX(-20px)",e.offsetHeight,e.style.opacity="1",e.style.transform="translateX(0)",t=(t+1)%r.length},500))}console.log("Mostrando SweetAlert..."),Swal.fire({title:"Generando PDF de Equipos",html:l,didOpen:()=>{console.log("SweetAlert abierto"),Swal.showLoading(),s(),a=setInterval(s,1e4)},willClose:()=>{console.log("SweetAlert cerrado"),clearInterval(a)},allowOutsideClick:!1}),console.log("Iniciando fetch de colaboradores..."),fetch(`/gres/colaboradores/${o}`).then(e=>{if(console.log("Respuesta de colaboradores recibida:",e),!e.ok)throw new Error(`Error al obtener colaboradores: ${e.status}`);return e.json()}).then(e=>{console.log("Datos de colaboradores:",e);const n=new FormData;return n.append("colaboradores",JSON.stringify(e.colaboradores)),n.append("buque_id",o),console.log("Enviando solicitud de PDF..."),fetch("/gres/equipos/export-pdf",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:n})}).then(e=>(console.log("Respuesta de PDF recibida:",e),e.ok?e.blob():e.json().then(n=>{throw new Error(n.message||"Error al generar el PDF")}))).then(e=>{console.log("Blob recibido, abriendo PDF..."),Swal.close();const n=URL.createObjectURL(e);window.open(n,"_blank")}).catch(e=>{console.error("Error en el proceso:",e),Swal.fire({icon:"error",title:"Error",text:e.message||"Ocurrió un error al generar el PDF. Por favor, intente nuevamente."})})};document.addEventListener("DOMContentLoaded",function(){console.log("DOMContentLoaded ejecutado");const o=document.getElementById("export-equipos-pdf-btn");console.log("Botón encontrado:",o),o?o.addEventListener("click",function(){console.log("Click en el botón detectado"),console.log("window.buqueId:",window.buqueId),window.buqueId?(console.log("Intentando exportar PDF..."),exportGresEquiposPdf(window.buqueId)):(console.log("Error: No se encontró window.buqueId"),Swal.fire({icon:"error",title:"Error",text:"No se encontró el ID del buque"}))}):console.log("Error: No se encontró el botón con id export-equipos-pdf-btn")});
