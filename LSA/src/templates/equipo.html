<!DOCTYPE html>
<html lang="es">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Cotecmar || Informaci贸n del Equipo</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      <link rel="stylesheet" href="static/css/mostrar_equipo.css">
  </head>
  <body>
    {% if equipo.imagen %}
    <!-- Imagen en miniatura -->
    <img 
        src="data:image/png;base64,{{ equipo.imagen|b64encode }}" 
        class="imagen" 
        style="float: right; border: #d3d3d388 5px solid; border-radius: 8px; cursor: pointer; margin-top: 60px; margin-right: 1rem;"
        data-bs-toggle="modal" 
        data-bs-target="#imageModal" 
        alt="Imagen del equipo"
        id="imagenEquipo"
    >
    {% endif %}
    <br>

    <div class="padding">
      <h3>Generalidades</h3>
      <div class="row">
        <div class="col-md-6 section1" style="padding-left: 0 !important">
          <div class="mb-3">
            <label><b>Fecha de Creaci贸n:</b></label>
            <span>{{ equipo.fecha }}</span>
          </div>
          
          <div class="mb-3">
            <label><b>Grupo constructivo:</b></label>
            <span>{{ grupo_constructivo.nombre if grupo_constructivo else 'No disponible' }}</span>
          </div>
          
          <div class="mb-3">
            <label><b>Subgrupo constructivo:</b></label>
            <span>{{ subgrupo_constructivo.nombre if subgrupo_constructivo else 'No disponible' }}</span>
          </div>
      
          <div class="mb-3">
            <label><b>Sistema:</b></label>
            <span>{{ sistema.nombre }}</span>
          </div>
  
          <div class="mb-3">
            <label><b>Tipo de equipo:</b></label>
            <span>{{ tipo_equipo.nombre if tipo_equipo else 'No disponible' }}</span>
          </div>
          
          <div class="mb-3">
            <label><b>Equipo:</b></label>
            <span>{{ datos_equipo.nombre if datos_equipo else 'No disponible' }}</span>
          </div>
        </div>
  
        <div class="col-md-6 section2">
          <div class="mb-3">
            <label><b>Responsable:</b></label>
            <span>{{ responsable.nombre_completo }}</span>
          </div>
  
          <div class="mb-3">
            <label><b>Criticidad de sistema:</b></label>
            <span>{{ equipo.criticidad_equipo }}</span>
          </div>
  
          <div class="mb-3">
            <label><b>Fiabilidad del sistema:</b></label>
            <span>{{ equipo.fiabilidad_equipo }}</span>
          </div>
        
          <div class="mb-3">
            <label><b>MTBF:</b></label>
            <span>{{ equipo.MTBF }}</span>
          </div>
        
          <div class="mb-3">
            <label><b>AOR:</b></label>
            <span>{{ equipo.AOR }}</span>
          </div>
        
          <div class="mb-3">
            <label><b>GRES:</b></label>
            <span>{{ equipo.GRES }}</span>
          </div>
        </div>
      </div>
    
    <br>
    <h3>Contexto Operacional</h3>
      <form>
        <div class="row">
          <div class="col-md-6 section1">
            <div class="mb-3">
              <label><b>Peso (Kg):</b></label>
              <span>{{ equipo.peso_seco }}</span>
            </div>
            
            <div class="mb-3">
              <label><b>Dimensiones (mmxmmxmm):</b></label>
              <span>{{ equipo.dimensiones }}</span>
            </div>
          </div>
    
          <div class="col-md-6 section2">
            <div class="mb-3">
              <label><b>Marca:</b></label>
              <span>{{ equipo.marca }}</span>
            </div>
    
            <div class="mb-3">
              <label><b>Modelo:</b></label>
              <span>{{ equipo.modelo }}</span>
            </div>
          </div>
        </div>
      </form>
      <br>
      <h3>Descripci贸n del Equipo</h3>
        <p>
          {{ equipo.descripcion }}
        </p>
      <br><br>
      <diV class="diagrama">
        <h3>Diagrama de Flujo del Subsistema Donde se encuentra Ubicado el Equipo</h3>
        {% if diagrama.diagrama_flujo %}
        <img src="data:image/png;base64,{{ diagrama.diagrama_flujo|b64encode }}" class="imagend" style="border: #d3d3d388 5px solid; border-radius: 8px;">
        {% endif %}
      </diV>  
      <br><br>
      <div class="diagrama">
        <h3>Diagrama Caja Negra de la Funci贸n</h3>
        {% if diagrama.diagrama_caja_negra %}
        <img src="data:image/png;base64,{{ diagrama.diagrama_caja_negra|b64encode }}" class="imagend"  style="border: #d3d3d388 5px solid; border-radius: 8px;">
        {% endif %}
      </div>  
      <br><br>
      <div class="diagrama">
        <h3>Diagrama de Caja Transparente</h3>
        {% if diagrama.diagrama_caja_transparente %}
        <img src="data:image/png;base64,{{ diagrama.diagrama_caja_transparente|b64encode }}" class="imagend"  style="border: #d3d3d388 5px solid; border-radius: 8px;">
        {% endif %}
      </div>  
      <br><br>
      <h3>Procedimiento de Arranque</h3>
      <p>{{ procedimiento.arranque }}</p>
      <br>
      <h3>Procedimiento de Parada</h3>
      <p>{{ procedimiento.parada }}</p>
      <br>
      <div>
        <button data-url="{{ url_for('editar_equipo', id_equipo_info=id_equipo_info) }}" 
                class="btn btn-primary no-print" 
                style="padding: 8px 15px;">
            <i class="bi bi-pen" style="color: whitesmoke;"></i>
        </button>
     
        <button id="btn-eliminar-equipo" class="btn btn-danger no-print" data-equipo-id="{{ id_equipo_info }}">
          <i class="bi bi-trash-fill" style="color: whitesmoke;"></i>
        </button>
      </div>
    </div>
     
    <!-- Modal de Bootstrap -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body text-center">
            <!-- Imagen completa -->
            <img 
                src="data:image/png;base64,{{ equipo.imagen|b64encode }}" 
                class="img-fluid" 
                alt="Imagen del equipo ampliada"
            >
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/equipo.js') }}"></script>

  </body>
</html>  